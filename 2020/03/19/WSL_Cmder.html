
<h2 id="assumptions">Assumptions</h2>

<ul>
  <li>아주 친절한 가이드는 아니다. 이 내용을 모두 까먹을 미래의 나를 위한 것이 이 글의 주된 용도다.</li>
  <li>아래에서 <code class="highlighter-rouge">|Something-anyting|</code>으로 표현된 것은 각자의 환경에 따라서 바뀌는 부분이다.</li>
</ul>

<h2 id="wsl">WSL</h2>

<p>윈도우 10의 가장 뛰어난 무기라면 Windows System for Linux (WSL)이 아닐까 싶다. 가상 머신을 돌리는 차원을 넘어서 거의 네이티브에 가깝게 리눅스를 지원한다. 아래 화면에서 보듯이 Windows Store에 Ubuntu가 올라와 있어서 설치에도 크게 신경 쓸 것이 없다.</p>

<p><img src="/lostineconomics-v2-1/images/wsl-cmder/fig_1.png" alt="" style="textalign:center; " width="500" /></p>

<p>다운 받아서 설치하고 한번 실행해줘야 한다. 그래야 계정 설정이 된다. 이것까지 마치면 WSL을 쓸 준비 완료다.</p>

<p><img src="/lostineconomics-v2-1/images/wsl-cmder/fig_2.png" alt="" style="textalign:center; " width="500" /></p>

<h2 id="cmder-for-wsl">Cmder for WSL</h2>

<p>이제 좀 더 편리하고 미감도 좋은 윈도용 코맨드라인 툴 <a href="https://cmder.net/">Cmder</a>에서 WSL을 설정해보자. 의외로 간단하다.</p>

<p><img src="/lostineconomics-v2-1/images/wsl-cmder/fig_3.png" alt="" style="textalign:center; " width="500" /></p>

<ul>
  <li><kbd>settings</kbd> →  <kbd>Startup</kbd> → <kbd>Tasks</kbd></li>
</ul>

<p>여기 항목 중에서 <code class="highlighter-rouge">{Bash::bash}</code>를 하나 클론한 후 이름을 적당한 것으로 바꾸도록 하자. 내 경우는 <code class="highlighter-rouge">{Bash::WSL}</code>로 설정했다. 커맨드 필드 아래와 같이 붙여 넣는다.</p>

<pre><code class="language-cmd">%windir%\system32\bash.exe -new_console ~
</code></pre>

<p>WSL을 통해 bash가 설치되었으므로 얘를 쓰겠다는 이야기다. bash를 불러오면 Ubuntu에 접근할 수 있다. 끝이다.</p>

<h2 id="ubuntu-first-thing-first">Ubuntu, first thing first</h2>

<p>우분투의 경우 설치를 한 후 몇 가지 업데이트 작업을 해줘야 한다.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>apt-get update <span class="c"># 업데이트 목록 갱신</span>
<span class="nb">sudo </span>apt-get upgrade <span class="c"># 현재 패키지 업그레이드</span>
<span class="nb">sudo </span>apt-get dist-upgrade <span class="c"># 신규 업데이트 설치</span>
</code></pre></div></div>

<p>몇가지 알아두면 좋은 설정 항목이 있다.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>dpkg-reconfigure tzdata <span class="c"># 타임존 맞추기 </span>
</code></pre></div></div>

<p>업데이트하는 패키지 기본 주소가 해외다. 국내로 맞추면 다운로드 등에서 조금 우리할 수 있다. 자세한 내용은 <a href="https://twpower.github.io/99-change-apt-get-source-server">여기</a>를 참고하시라.</p>

<h2 id="installing-python">Installing python</h2>

<p>이제 python(이하 파이썬으로 쓰기도 병행하겠다)을 설치할 차례다. 다소 의아할지 모르겠지만, macos, 윈도에 비해서 파이썬을 설치하고 운용하는 것이 쉽지 않다. 리눅스의 경우 하나하나 설정해야 하는 것이 많다. 내용을 자세히 안다면 세밀하고 명확한 통제가 가능한 것이겠지만, 주류 OS의 편안함에 익숙하다면 당황스러운 경우를 접하게 된다.</p>

<p>우선, 우분투18.04에는 파이썬이 탑재되어 있다. 2.7, 3.6x 두가지 버전이나 이미 깔려 있다. 그럼, 최신 python은 어떻게 써야 할까?</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>apt update
<span class="nb">sudo </span>apt <span class="nb">install </span>software-properties-common
<span class="nb">sudo </span>add-apt-repository ppa:deadsnakes/ppa
<span class="nb">sudo </span>apt update
<span class="nb">sudo </span>apt <span class="nb">install </span>python3.7
</code></pre></div></div>

<p>이렇게 설치한 후</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>~<span class="nv">$ </span>python3.7 <span class="nt">--version</span>
Python 3.7.7 
</code></pre></div></div>

<p>이렇게 잘 출력되어야 한다. 하지만 매번 <code class="highlighter-rouge">python3.7</code>이라고 칠 수는 없는 노릇이니, 얘가 내가 쓰고 싶은 파이썬이란 점은 bash에게 알려줘야 한다.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">cd</span> ~ <span class="c"># 홈으로 이동</span>
~<span class="nv">$ </span><span class="nb">sudo </span>nano /.bash_aliases 
</code></pre></div></div>

<p>우분투 18.04에는 nano 에디터가 들어 있다. 없다면, vim을 써도 된다. 이제 이 파일에 아래과 같은 내용을 적고 저장한다. <code class="highlighter-rouge">sudo</code>를 쓰는 이유는 파일을 생성하게 되기 때문이다.</p>

<div class="language-text highlighter-rouge"><div class="highlight"><pre class="highlight"><code>alias python=python3.7
alias pip=pip3
</code></pre></div></div>

<p>보통 어떤 포스트의 경우 여기에서 <code class="highlighter-rouge">sudo apt install python3-pip</code>로 pip를 업데이트할 수 있다고 가이드하고 있다. 하지만, 18.04버전에서는 9.0 이상으로 <code class="highlighter-rouge">pip</code>가 올라가지 않는다. 아래와 같이 하면 최신 판본(이 글을 쓰는 시점에서는 20.0.2)으로 업그레이드가 가능하다.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>apt-get purge python-pip
wget https://bootstrap.pypa.io/get-pip.py
<span class="nb">sudo </span>python get-pip.py
pip <span class="nt">--version</span>
<span class="nb">rm </span>get-pip.py
</code></pre></div></div>

<p>아래와 같이 나와주면 준비완료다.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>~<span class="nv">$ </span>pip <span class="nt">--version</span>
pip 20.0.2 from /usr/local/lib/python3.7/dist-packages/pip <span class="o">(</span>python 3.7<span class="o">)</span>
</code></pre></div></div>

<p>만일 가상환경을 쓰고 싶다면, 아래와 같이 <code class="highlighter-rouge">venv</code>를 설치해서 쓰면 되겠다. venv는 python 3.3 이후에 파이썬에 내장된 자체 가상 환경이다. <code class="highlighter-rouge">conda</code>나 <code class="highlighter-rouge">virtualenv</code> 같은 걸 써도 무방하겠다.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>apt <span class="nb">install </span>python3.7-venv
python <span class="nt">-m</span> venv |your-venv|
<span class="nb">source</span>  |your-venv|/bin/activate
</code></pre></div></div>

<p>정신건강을 위해서 python 개발에 필요한 필수 패키지도 설치해두도록 하자.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>apt-get <span class="nb">install </span>python3.7-dev
</code></pre></div></div>

<h2 id="connect-to-vs-code">Connect to VS Code</h2>

<p>이제 우분투 18.04를 설치하고 파이썬까지 잘 설치했다. 하지만 코딩은 어떻게 하지? 우분투에 VS Code를 깔아야 할까? 그런데 현재 설치한 우분투는 GUI가 없는 버전이니까 X-Windows 같은 것을 깔아야 할까? 걱정할 필요 없다! 윈도에 깔린 VS Code를 그대로 쓰면 된다.</p>

<p>VS Code의 extension 중에서 <code class="highlighter-rouge">Remote - WSL</code>이란 것이 있다. 이 녀석을 깔면 윈도 시스템에 설치된 WSL에 VS Code가 접근할 수 있게 된다.</p>

<p><img src="/lostineconomics-v2-1/images/wsl-cmder/fig_4.png" alt="" style="textalign:center; " width="500" /></p>

<p>VS Code 창 아래 왼쪽에 녹색 바를 클릭하면 WSL에 연결할 수 있게 된다.</p>

<p><img src="/lostineconomics-v2-1/images/wsl-cmder/fig_5.png" alt="" style="textalign:center; " width="500" /></p>

<p>일단 WSL에 접속하면 별도의 창이 뜬다. 이는 별도의 환경으로 운용되므로 알맞은 세팅을 쓰면 된다.</p>

<p>가상 환경을 쓰는 경우 가상 환경에 접근할 수 있어야 한다.</p>

<ul>
  <li>VS Code의 메뉴에서 <kbd>File</kbd> → <kbd>Preference</kbd> → <kbd>settings</kbd></li>
  <li>“python:Pythonpath”로 검색한 후 아래를 브라우징하다보면, “Venv path”라는 항목이 나온다. 만일 conda와 같은 다른 가상 환경을 쓴다면 해당 항목에 적당한 디렉토리를 넣으면 되겠다.
    <ul>
      <li>가상 환경이 이름이 <code class="highlighter-rouge">.pyvenv</code>라면 적당한 디렉토리와 함께 아래와 같이 심어주면 되겠다.</li>
    </ul>
  </li>
</ul>

<p><img src="/lostineconomics-v2-1/images/vanilla-python/vscode.png" alt="" style="textalign:center; " width="500" /></p>

<ul>
  <li>여기까지 마쳤으면 WSL에 접근된 상태에서 WSL에 깔린 파이썬 가상 환경으로도 접근이 가능하다. 해당 Python 커널을 인식해주면 VS Code가 이후 환경에서 파이썬을 구동하는 데 필요한 프로그램을 자동으로 깐다. 깔게 두자.</li>
</ul>

<p><img src="/lostineconomics-v2-1/images/wsl-cmder/fig_5.png" alt="" style="textalign:center; " width="500" /></p>

<p>이후 VS Code를 이용해 필요한 파일을 불러와도 되고, 아니면 Cmder 창에서 아래와 같이 실행하자.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>code |your-working-python-file.py|
</code></pre></div></div>

<p>이렇게 넣으면 윈도에 구동되는  VS Code 위에서 WSL 내의 파일들이 뜬다. 편하게 작업할 수 있다.</p>

<h2 id="why">Why…</h2>

<p>사실 그냥 윈도에서 파이썬 깔아서 써도 문송한 내 수준에서는 충분하다. Pandas 패키지를 몇 배가 빠르게 돌릴 수 있는 <a href="https://github.com/modin-project/modin">modin</a> 프로젝트의 <code class="highlighter-rouge">ray</code>가 리눅스와 macos에서만 돌아간다. 이것 때문에 맥북을 살 수는 없는 노릇 아닌가… 마.</p>

<h2 id="references">References</h2>

<ul>
  <li><a href="https://aliwo.github.io/swblog/linux/ubuntu/ubuntu-new-python/#">파이썬 설치</a></li>
  <li><a href="https://stackoverflow.com/questions/50950554/pip-issue-in-ubuntu-18-04-pkg-resources-distributionnotfound-the-pip-10-0-1">pip 설치 issue</a></li>
  <li><a href="https://gyeonghunkim.github.io/wsl-%ED%99%98%EA%B2%BD%EC%84%A4%EC%A0%95/install-VSCode-on-WSL/">WSL 연동</a></li>
</ul>

<!--stackedit_data:
eyJoaXN0b3J5IjpbLTIwNjIxNTE2NTBdfQ==
-->
